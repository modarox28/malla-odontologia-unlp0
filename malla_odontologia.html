<!DOCTYPE html>
<html lang="es">
<head>
  <link rel="apple-touch-icon" href="icon_diente.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="Malla Odonto">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Malla Interactiva Odontología</title>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Nunito', sans-serif;
      background: #ffe6ef;
      padding: 20px;
      color: #333;
    }
    .cuatrimestre {
      margin-bottom: 30px;
      padding: 15px;
      background-color: #ffd6e8;
      border-radius: 10px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .cuatrimestre h3 {
      font-weight: 700;
      margin-top: 0;
      border-bottom: 2px solid #ff9dc0;
      padding-bottom: 5px;
    }
    .materias-container {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    .materia {
      font-weight: 500;
      border: 1px solid #ccc;
      padding: 12px;
      border-radius: 8px;
      cursor: pointer;
      background-color: #fff0f5;
      transition: transform 0.2s, background-color 0.3s;
      flex: 1 1 calc(50% - 20px);
      box-sizing: border-box;
      min-width: 140px;
      max-width: 100%;
    }
    .materia:hover {
      background-color: #ffd6e8;
    }
    .materia.aprobada::before {
      content: '✅ ';
    }
    .materia.bloqueada::before {
      content: '❌ ';
    }
    .materia:active {
      transform: scale(0.98);
    }
    .aprobada {
      background-color: #fbb6ce !important;
    }
    .bloqueada {
      background-color: #d6b3f7 !important;
      pointer-events: none;
      opacity: 0.6;
    }
    #toggle-dark, #reset {
      margin: 10px 10px 20px 0;
      padding: 10px 18px;
      font-weight: bold;
      background: #ff9dc0;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    #toggle-dark:hover, #reset:hover {
      background: #ff77aa;
    }
    body.dark {
      background: #121212;
      color: #eee;
    }
    body.dark .materia {
      background-color: #1f1f1f;
      border-color: #444;
    }
    body.dark .cuatrimestre {
      background-color: #2a2a2a;
      border-color: #444;
    }
  </style>
</head>
<body>
  <button id="toggle-dark">Modo Oscuro</button>
  <button id="reset">Reiniciar progreso</button>
  <div id="malla"></div>

  <script>
    const materias = {
  "Primer Año - Primer Cuatrimestre": [
    "Biología General I",
    "Biofísica I",
    "Bioquímica Estomatológica I",
    "Anatomía I",
    "Introducción a la Odontología",
    "Odontología Preventiva y Social I"
  ],
  "Primer Año - Segundo Cuatrimestre": [
    "Biología General II",
    "Biofísica II",
    "Anatomía II",
    "Histología y Embriología I"
  ],
  "Segundo Año - Primer Cuatrimestre": [
    "Histología y Embriología II",
    "Biomateriales I",
    "Dimensión Psicológica de la Atención Odontológica",
    "Fisiología I",
    "Microbiología y Parasitología I",
    "Odontología Preventiva y Social II"
  ],
  "Segundo Año - Segundo Cuatrimestre": [
    "Bioquímica Estomatológica II",
    "Microbiología y Parasitología II",
    "Biomateriales II",
    "Fisiología II",
    "Patología y Clínica Estomatológica I"
  ],
  "Tercer Año - Primer Cuatrimestre": [
    "Odontología Preventiva y Social III",
        "Cirugía I",
    "Farmacología y Terapéutica I",
    "Patología y Clínica Estomatológica II",
    "Diagnóstico por Imágenes I",
    "Operatoria Dental I",
    "Prótesis I"
  ],
  "Tercer Año - Segundo Cuatrimestre": [
    "Farmacología y Terapéutica II",
    "Patología y Clínica Estomatológica III",
    "Operatoria Dental II",
    "Prótesis II",
    "Diagnóstico por Imágenes II",
    "Cirugía II"
  ],
  "Cuarto Año - Primer Cuatrimestre": [
        "Odontología Preventiva y Social IV",
    "Endodoncia I",
    "Periodoncia I",
    "Cirugía III",
    "Operatoria Dental III",
    "Prótesis III",
    "Patología y Clínica Estomatológica IV"
  ],
  "Cuarto Año - Segundo Cuatrimestre": [
    "Endodoncia II",
    "Periodoncia II",
    "Cirugía IV",
    "Operatoria Dental IV",
    "Prótesis IV",
    "Patología y Clínica Estomatológica V"
  ],
  "Quinto Año - Primer Cuatrimestre": [
    "Odontología Preventiva y Social V",
    "Odontología Integral Niños I",
    "Odontología Integral Niños II",
    "Cirugía V",
    "Odontología Legal y Forense",
    "Operatoria Dental V",
    "Prótesis V"
  ],
  "Quinto Año - Segundo Cuatrimestre": [
    "Odontología Integral Niños III",
    "Cirugía VI",
    "Bioética",
    "Operatoria Dental VI",
    "Prótesis VI",
    "Prácticas Profesionales Supervisadas (P.P.S.)"
  ]
};
    const correlativas = {
  "Anatomía II": ["Anatomía I"],
  "Biología General II": ["Biología General I"],
  "Biofísica II": ["Biofísica I"],
  "Bioquímica Estomatológica II": ["Bioquímica Estomatológica I"],
  "Odontología Preventiva y Social II": ["Odontología Preventiva y Social I"],
  "Histología y Embriología I": ["Biología General I"],
  "Fisiología I": ["Anatomía II", "Histología y Embriología I", "Biofísica II", "Bioquímica Estomatológica I"],
  "Microbiología y Parasitología I": ["Bioquímica Estomatológica I", "Biofísica II", "Biología General II"],
  "Histología y Embriología II": ["Bioquímica Estomatológica I", "Histología y Embriología I"],
  "Biomateriales I": ["Bioquímica Estomatológica I", "Anatomía II", "Biofísica II"],
  "Dimensión Psicológica de la Atención Odontológica": ["Introducción a la Odontología"],
  "Fisiología II": ["Fisiología I", "Histología y Embriología II"],
  "Microbiología y Parasitología II": ["Microbiología y Parasitología I"],
  "Patología y Clínica Estomatológica I": ["Anatomía II", "Biología General II", "Histología y Embriología II", "Microbiología y Parasitología I", "Biofísica II"],
  "Biomateriales II": ["Biomateriales I"],
  "Odontología Preventiva y Social III": ["Biomateriales II", "Odontología Preventiva y Social II", "Microbiología y Parasitología I", "Patología y Clínica Estomatológica I"],
  "Cirugía I": ["Fisiología II", "Patología y Clínica Estomatológica I", "Microbiología y Parasitología II"],
  "Farmacología y Terapéutica I": ["Bioquímica Estomatológica II", "Fisiología II", "Patología y Clínica Estomatológica I", "Microbiología y Parasitología II"],
  "Patología y Clínica Estomatológica II": ["Patología y Clínica Estomatológica I", "Microbiología y Parasitología II"],
  "Diagnóstico por Imágenes I": ["Biofísica II", "Patología y Clínica Estomatológica I"],
  "Operatoria Dental I": ["Histología y Embriología II", "Biomateriales I"],
  "Prótesis I": ["Biomateriales II", "Fisiología II"],
  "Cirugía II": ["Biomateriales II", "Cirugía I", "Farmacología y Terapéutica I", "Patología y Clínica Estomatológica II"],
  "Farmacología y Terapéutica II": ["Farmacología y Terapéutica I", "Patología y Clínica Estomatológica II"],
  "Patología y Clínica Estomatológica III": ["Fisiología II", "Patología y Clínica Estomatológica II"],
  "Operatoria Dental II": ["Operatoria Dental I", "Patología y Clínica Estomatológica II"],
  "Prótesis II": ["Prótesis I"],
  "Diagnóstico por Imágenes II": ["Diagnóstico por Imágenes I", "Patología y Clínica Estomatológica II"],
  "Odontología Preventiva y Social IV": [ "Farmacología y Terapéutica II"],
  "Endodoncia I": ["Diagnóstico por Imágenes II", "Patología y Clínica Estomatológica II", "Farmacología y Terapéutica II"],
  "Periodoncia I": ["Diagnóstico por Imágenes II",  "Patología y Clínica Estomatológica II"],
  "Cirugía III": ["Cirugía II", "Farmacología y Terapéutica II", "Patología y Clínica Estomatológica III"],
  "Operatoria Dental III": ["Operatoria Dental II", "Diagnóstico por Imágenes II", "Patología y Clínica Estomatológica II", "Farmacología y Terapéutica II"],
  "Prótesis III": ["Prótesis II", "Cirugía II", "Patología y Clínica Estomatológica III"],
  "Patología y Clínica Estomatológica IV": ["Patología y Clínica Estomatológica III"],
  "Endodoncia II": ["Endodoncia I"],
  "Periodoncia II": ["Periodoncia I"],
  "Cirugía IV": ["Cirugía III"],
  "Operatoria Dental IV": ["Operatoria Dental III", "Periodoncia I"],
  "Prótesis IV": ["Prótesis III", "Periodoncia I"],
  "Patología y Clínica Estomatológica V": ["Patología y Clínica Estomatológica IV"],
  "Odontología Preventiva y Social V": ["Operatoria Dental IV", "Odontología Preventiva y Social IV", "Endodoncia II", "Periodoncia II", "Cirugía IV"],
  "Odontología Integral Niños I": ["Operatoria Dental IV", "Prótesis IV", "Patología y Clínica Estomatológica V", "Odontología Preventiva y Social IV", "Endodoncia II", "Periodoncia II", "Cirugía IV"],
  "Odontología Integral Niños II": ["Patología y Clínica Estomatológica I", "Diagnóstico por Imágenes II", "Prótesis I"],
  "Cirugía V": ["Patología y Clínica Estomatológica V", "Cirugía IV"],
  "Odontología Legal y Forense": ["Operatoria Dental IV", "Prótesis IV", "Patología y Clínica Estomatológica V", "Endodoncia II", "Periodoncia II", "Cirugía IV"],
  "Operatoria Dental V": ["Operatoria Dental IV", "Periodoncia II"],
  "Prótesis V": ["Prótesis IV", "Endodoncia II"],
  "Odontología Integral Niños III": ["Odontología Integral Niños I", "Odontología Integral Niños II"],
  "Cirugía VI": ["Cirugía V"],
  "Bioética": ["Odontología Integral Niños I", "Odontología Integral Niños II", "Odontología Legal y Forense"],
  "Operatoria Dental VI": ["Endodoncia II", "Operatoria Dental V"],
  "Prótesis VI": ["Prótesis V"],
  "Prácticas Profesionales Supervisadas (P.P.S.)": ["Odontología Preventiva y Social V"]
};
    let aprobadas = JSON.parse(localStorage.getItem("aprobadas") || "[]");

    function renderMalla() {
      const cont = document.getElementById("malla");
      cont.innerHTML = "";

      for (const [cuatrimestre, materiasDelCuatri] of Object.entries(materias)) {
        const bloque = document.createElement("div");
        bloque.className = "cuatrimestre";
        const titulo = document.createElement("h3");
        titulo.textContent = cuatrimestre;
        bloque.appendChild(titulo);

        const contMaterias = document.createElement("div");
        contMaterias.className = "materias-container";

        materiasDelCuatri.forEach(nombre => {
          const div = document.createElement("div");
          div.className = "materia";
          div.textContent = nombre;

          const correlativasTexto = (correlativas[nombre] || []).join(', ');
          if (correlativasTexto) {
            div.title = 'Correlativas: ' + correlativasTexto;
          }

          const reqs = correlativas[nombre] || [];
          if (!aprobadas.includes(nombre) && reqs.length > 0 && reqs.some(c => !aprobadas.includes(c))) {
            div.title += `
Faltan: ${reqs.filter(c => !aprobadas.includes(c)).join(', ')}`;
          }
          const bloqueada = reqs.some(c => !aprobadas.includes(c));

          if (aprobadas.includes(nombre)) {
            div.classList.add("aprobada");
          } else if (bloqueada) {
            div.classList.add("bloqueada");
          }

          div.onclick = () => toggleMateria(nombre);
          contMaterias.appendChild(div);
        });

        bloque.appendChild(contMaterias);
        cont.appendChild(bloque);
      }
    }

    function toggleMateria(nombre) {
      const i = aprobadas.indexOf(nombre);
      if (i >= 0) aprobadas.splice(i, 1);
      else aprobadas.push(nombre);
      localStorage.setItem("aprobadas", JSON.stringify(aprobadas));
      renderMalla();
    }

    document.getElementById("toggle-dark").onclick = () => {
      document.body.classList.toggle("dark");
    };

    document.getElementById("reset").onclick = () => {
      if (confirm("¿Estás seguro de que querés reiniciar el progreso?")) {
        aprobadas = [];
        localStorage.setItem("aprobadas", JSON.stringify(aprobadas));
        renderMalla();
      }
    };
      renderMalla();
  </script>
</body>
</html>
