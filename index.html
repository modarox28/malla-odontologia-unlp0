<!DOCTYPE html>
<html lang="es">
<head>
  <link rel="apple-touch-icon" href="icon_diente.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="Malla Odonto">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Malla Interactiva Odontolog√≠a</title>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Nunito', sans-serif;
      background: #ffe6ef;
      padding: 20px;
      color: #333;
    }
    .cuatrimestre {
      margin-bottom: 30px;
      padding: 15px;
      background-color: #ffd6e8;
      border-radius: 10px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .cuatrimestre h3 {
      font-weight: 700;
      margin-top: 0;
      border-bottom: 2px solid #ff9dc0;
      padding-bottom: 5px;
    }
    .materias-container {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    .materia {
      font-weight: 500;
      border: 1px solid #ccc;
      padding: 12px;
      border-radius: 8px;
      cursor: pointer;
      background-color: #fff0f5;
      transition: transform 0.2s, background-color 0.3s;
      flex: 1 1 calc(50% - 20px);
      box-sizing: border-box;
      min-width: 140px;
      max-width: 100%;
    }
    .materia:hover {
      background-color: #ffd6e8;
    }
    .materia.aprobada::before {
      content: '‚úÖ ';
    }
    .materia.bloqueada::before {
      content: '‚ùå ';
    }
    .materia:active {
      transform: scale(0.98);
    }
    .aprobada {
      background-color: #fbb6ce !important;
    }
    .bloqueada {
      background-color: #d6b3f7 !important;
      pointer-events: none;
      opacity: 0.6;
    }
    #toggle-dark, #reset {
      margin: 10px 10px 20px 0;
      padding: 10px 18px;
      font-weight: bold;
      background: #ff9dc0;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    #toggle-dark:hover, #reset:hover {
      background: #ff77aa;
    }
    body.dark {
      background: #121212;
      color: #eee;
    }
    body.dark p {
      color: #bbb;
    }
    body.dark .materia {
      background-color: #1f1f1f;
      border-color: #444;
    }
    body.dark .cuatrimestre {
      background-color: #2a2a2a;
      border-color: #444;
    }
  </style>
</head>
<body>
  <button id="toggle-dark">Modo Oscuro</button>
  <button id="reset">Reiniciar progreso</button>
  <h2 style="font-family: Arial, sans-serif; font-weight: bold; font-size: 1.6em; margin-top: 0; margin-bottom: 8px; color: #aa4c85; text-align: center;">Odont√≥loga Geraldine Su√°rez ü¶∑</h2>
  <div style="margin-bottom: 10px; font-size: 0.95em;">
    <strong>Colores:</strong>
    <span style="background-color: #fdd1e2; padding: 4px 8px; border-radius: 4px; margin-right: 5px;">Cursando</span>
    <span style="background-color: #e3a8d6; padding: 4px 8px; border-radius: 4px; margin-right: 5px;">Aprobada</span>
    <span style="background-color: #9f80aa; color: white; padding: 4px 8px; border-radius: 4px;">Final</span>
  </div>
  <div id="stats"></div>
  <div id="progress-container" style="background: #ffd6e8; border-radius: 8px; height: 20px; width: 100%; margin-bottom: 20px; overflow: hidden;">
    <div id="progress-bar" style="height: 100%; background: #fbb6ce; width: 0%; transition: width 0.3s ease;"></div>
  </div>
  <nav id="navegacion-anios" style="position: fixed; bottom: 20px; left: 0; right: 0; text-align: center; background: #ffe6ef; padding: 10px 0; border-top: 1px solid #ffc0cb; z-index: 1000; box-shadow: 0 -2px 5px rgba(0,0,0,0.1);">
    <button onclick="scrollToCuatrimestre('Primer A√±o')">1¬∞</button>
    <button onclick="scrollToCuatrimestre('Segundo A√±o')">2¬∞</button>
    <button onclick="scrollToCuatrimestre('Tercer A√±o')">3¬∞</button>
    <button onclick="scrollToCuatrimestre('Cuarto A√±o')">4¬∞</button>
    <button onclick="scrollToCuatrimestre('Quinto A√±o')">5¬∞</button>
  </nav>
  <div id="malla"></div>
  <style>
    #navegacion-anios button {
      margin: 0 4px;
      margin: 5px;
      padding: 8px 14px;
      font-weight: bold;
      border: none;
      border-radius: 6px;
      background: #ffb3c6;
      cursor: pointer;
    }
    #navegacion-anios button:hover {
      background: #ff94b7;
    }
  </style>
  <p style="text-align: center; margin-top: 40px; font-size: 0.9em; color: #888; font-family: 'Nunito', sans-serif;">
    By: <strong>m0d4r0x</strong>
  </p>

  <script>
    const materias = {
  "Primer A√±o - Primer Cuatrimestre": [
    "Biolog√≠a General I",
    "Biof√≠sica I",
    "Bioqu√≠mica Estomatol√≥gica I",
    "Anatom√≠a I",
    "Introducci√≥n a la Odontolog√≠a",
    "Odontolog√≠a Preventiva y Social I"
  ],
  "Primer A√±o - Segundo Cuatrimestre": [
    "Biolog√≠a General II",
    "Biof√≠sica II",
    "Anatom√≠a II",
    "Histolog√≠a y Embriolog√≠a I"
  ],
  "Segundo A√±o - Primer Cuatrimestre": [
    "Histolog√≠a y Embriolog√≠a II",
    "Biomateriales I",
    "Dimensi√≥n Psicol√≥gica de la Atenci√≥n Odontol√≥gica",
    "Fisiolog√≠a I",
    "Microbiolog√≠a y Parasitolog√≠a I",
    "Odontolog√≠a Preventiva y Social II"
  ],
  "Segundo A√±o - Segundo Cuatrimestre": [
    "Bioqu√≠mica Estomatol√≥gica II",
    "Microbiolog√≠a y Parasitolog√≠a II",
    "Biomateriales II",
    "Fisiolog√≠a II",
    "Patolog√≠a y Cl√≠nica Estomatol√≥gica I"
  ],
  "Tercer A√±o - Primer Cuatrimestre": [
    "Odontolog√≠a Preventiva y Social III",
        "Cirug√≠a I",
    "Farmacolog√≠a y Terap√©utica I",
    "Patolog√≠a y Cl√≠nica Estomatol√≥gica II",
    "Diagn√≥stico por Im√°genes I",
    "Operatoria Dental I",
    "Pr√≥tesis I"
  ],
  "Tercer A√±o - Segundo Cuatrimestre": [
    "Farmacolog√≠a y Terap√©utica II",
    "Patolog√≠a y Cl√≠nica Estomatol√≥gica III",
    "Operatoria Dental II",
    "Pr√≥tesis II",
    "Diagn√≥stico por Im√°genes II",
    "Cirug√≠a II"
  ],
  "Cuarto A√±o - Primer Cuatrimestre": [
        "Odontolog√≠a Preventiva y Social IV",
    "Endodoncia I",
    "Periodoncia I",
    "Cirug√≠a III",
    "Operatoria Dental III",
    "Pr√≥tesis III",
    "Patolog√≠a y Cl√≠nica Estomatol√≥gica IV"
  ],
  "Cuarto A√±o - Segundo Cuatrimestre": [
    "Endodoncia II",
    "Periodoncia II",
    "Cirug√≠a IV",
    "Operatoria Dental IV",
    "Pr√≥tesis IV",
    "Patolog√≠a y Cl√≠nica Estomatol√≥gica V"
  ],
  "Quinto A√±o - Primer Cuatrimestre": [
    "Odontolog√≠a Preventiva y Social V",
    "Odontolog√≠a Integral Ni√±os I",
    "Odontolog√≠a Integral Ni√±os II",
    "Cirug√≠a V",
    "Odontolog√≠a Legal y Forense",
    "Operatoria Dental V",
    "Pr√≥tesis V"
  ],
  "Quinto A√±o - Segundo Cuatrimestre": [
    "Odontolog√≠a Integral Ni√±os III",
    "Cirug√≠a VI",
    "Bio√©tica",
    "Operatoria Dental VI",
    "Pr√≥tesis VI",
    "Pr√°cticas Profesionales Supervisadas (P.P.S.)"
  ]
};
    const correlativas = {
  "Anatom√≠a II": ["Anatom√≠a I"],
  "Biolog√≠a General II": ["Biolog√≠a General I"],
  "Biof√≠sica II": ["Biof√≠sica I"],
  "Bioqu√≠mica Estomatol√≥gica II": ["Bioqu√≠mica Estomatol√≥gica I"],
  "Odontolog√≠a Preventiva y Social II": ["Odontolog√≠a Preventiva y Social I"],
  "Histolog√≠a y Embriolog√≠a I": ["Biolog√≠a General I"],
  "Fisiolog√≠a I": ["Anatom√≠a II", "Histolog√≠a y Embriolog√≠a I", "Biof√≠sica II", "Bioqu√≠mica Estomatol√≥gica I"],
  "Microbiolog√≠a y Parasitolog√≠a I": ["Bioqu√≠mica Estomatol√≥gica I", "Biof√≠sica II", "Biolog√≠a General II"],
  "Histolog√≠a y Embriolog√≠a II": ["Bioqu√≠mica Estomatol√≥gica I", "Histolog√≠a y Embriolog√≠a I"],
  "Biomateriales I": ["Bioqu√≠mica Estomatol√≥gica I", "Anatom√≠a II", "Biof√≠sica II"],
  "Dimensi√≥n Psicol√≥gica de la Atenci√≥n Odontol√≥gica": ["Introducci√≥n a la Odontolog√≠a"],
  "Fisiolog√≠a II": ["Fisiolog√≠a I", "Histolog√≠a y Embriolog√≠a II"],
  "Microbiolog√≠a y Parasitolog√≠a II": ["Microbiolog√≠a y Parasitolog√≠a I"],
  "Patolog√≠a y Cl√≠nica Estomatol√≥gica I": ["Anatom√≠a II", "Biolog√≠a General II", "Histolog√≠a y Embriolog√≠a II", "Microbiolog√≠a y Parasitolog√≠a I", "Biof√≠sica II"],
  "Biomateriales II": ["Biomateriales I"],
  "Odontolog√≠a Preventiva y Social III": ["Biomateriales II", "Odontolog√≠a Preventiva y Social II", "Microbiolog√≠a y Parasitolog√≠a I", "Patolog√≠a y Cl√≠nica Estomatol√≥gica I"],
  "Cirug√≠a I": ["Fisiolog√≠a II", "Patolog√≠a y Cl√≠nica Estomatol√≥gica I", "Microbiolog√≠a y Parasitolog√≠a II"],
  "Farmacolog√≠a y Terap√©utica I": ["Bioqu√≠mica Estomatol√≥gica II", "Fisiolog√≠a II", "Patolog√≠a y Cl√≠nica Estomatol√≥gica I", "Microbiolog√≠a y Parasitolog√≠a II"],
  "Patolog√≠a y Cl√≠nica Estomatol√≥gica II": ["Patolog√≠a y Cl√≠nica Estomatol√≥gica I", "Microbiolog√≠a y Parasitolog√≠a II"],
  "Diagn√≥stico por Im√°genes I": ["Biof√≠sica II", "Patolog√≠a y Cl√≠nica Estomatol√≥gica I"],
  "Operatoria Dental I": ["Histolog√≠a y Embriolog√≠a II", "Biomateriales I"],
  "Pr√≥tesis I": ["Biomateriales II", "Fisiolog√≠a II"],
  "Cirug√≠a II": ["Biomateriales II", "Cirug√≠a I", "Farmacolog√≠a y Terap√©utica I", "Patolog√≠a y Cl√≠nica Estomatol√≥gica II"],
  "Farmacolog√≠a y Terap√©utica II": ["Farmacolog√≠a y Terap√©utica I", "Patolog√≠a y Cl√≠nica Estomatol√≥gica II"],
  "Patolog√≠a y Cl√≠nica Estomatol√≥gica III": ["Fisiolog√≠a II", "Patolog√≠a y Cl√≠nica Estomatol√≥gica II"],
  "Operatoria Dental II": ["Operatoria Dental I", "Patolog√≠a y Cl√≠nica Estomatol√≥gica II"],
  "Pr√≥tesis II": ["Pr√≥tesis I"],
  "Diagn√≥stico por Im√°genes II": ["Diagn√≥stico por Im√°genes I", "Patolog√≠a y Cl√≠nica Estomatol√≥gica II"],
  "Odontolog√≠a Preventiva y Social IV": [ "Farmacolog√≠a y Terap√©utica II"],
  "Endodoncia I": ["Diagn√≥stico por Im√°genes II", "Patolog√≠a y Cl√≠nica Estomatol√≥gica II", "Farmacolog√≠a y Terap√©utica II"],
  "Periodoncia I": ["Diagn√≥stico por Im√°genes II",  "Patolog√≠a y Cl√≠nica Estomatol√≥gica II"],
  "Cirug√≠a III": ["Cirug√≠a II", "Farmacolog√≠a y Terap√©utica II", "Patolog√≠a y Cl√≠nica Estomatol√≥gica III"],
  "Operatoria Dental III": ["Operatoria Dental II", "Diagn√≥stico por Im√°genes II", "Patolog√≠a y Cl√≠nica Estomatol√≥gica II", "Farmacolog√≠a y Terap√©utica II"],
  "Pr√≥tesis III": ["Pr√≥tesis II", "Cirug√≠a II", "Patolog√≠a y Cl√≠nica Estomatol√≥gica III"],
  "Patolog√≠a y Cl√≠nica Estomatol√≥gica IV": ["Patolog√≠a y Cl√≠nica Estomatol√≥gica III"],
  "Endodoncia II": ["Endodoncia I"],
  "Periodoncia II": ["Periodoncia I"],
  "Cirug√≠a IV": ["Cirug√≠a III"],
  "Operatoria Dental IV": ["Operatoria Dental III", "Periodoncia I"],
  "Pr√≥tesis IV": ["Pr√≥tesis III", "Periodoncia I"],
  "Patolog√≠a y Cl√≠nica Estomatol√≥gica V": ["Patolog√≠a y Cl√≠nica Estomatol√≥gica IV"],
  "Odontolog√≠a Preventiva y Social V": ["Operatoria Dental IV", "Odontolog√≠a Preventiva y Social IV", "Endodoncia II", "Periodoncia II", "Cirug√≠a IV"],
  "Odontolog√≠a Integral Ni√±os I": ["Operatoria Dental IV", "Pr√≥tesis IV", "Patolog√≠a y Cl√≠nica Estomatol√≥gica V", "Odontolog√≠a Preventiva y Social IV", "Endodoncia II", "Periodoncia II", "Cirug√≠a IV"],
  "Odontolog√≠a Integral Ni√±os II": ["Patolog√≠a y Cl√≠nica Estomatol√≥gica I", "Diagn√≥stico por Im√°genes II", "Pr√≥tesis I"],
  "Cirug√≠a V": ["Patolog√≠a y Cl√≠nica Estomatol√≥gica V", "Cirug√≠a IV"],
  "Odontolog√≠a Legal y Forense": ["Operatoria Dental IV", "Pr√≥tesis IV", "Patolog√≠a y Cl√≠nica Estomatol√≥gica V", "Endodoncia II", "Periodoncia II", "Cirug√≠a IV"],
  "Operatoria Dental V": ["Operatoria Dental IV", "Periodoncia II"],
  "Pr√≥tesis V": ["Pr√≥tesis IV", "Endodoncia II"],
  "Odontolog√≠a Integral Ni√±os III": ["Odontolog√≠a Integral Ni√±os I", "Odontolog√≠a Integral Ni√±os II"],
  "Cirug√≠a VI": ["Cirug√≠a V"],
  "Bio√©tica": ["Odontolog√≠a Integral Ni√±os I", "Odontolog√≠a Integral Ni√±os II", "Odontolog√≠a Legal y Forense"],
  "Operatoria Dental VI": ["Endodoncia II", "Operatoria Dental V"],
  "Pr√≥tesis VI": ["Pr√≥tesis V"],
  "Pr√°cticas Profesionales Supervisadas (P.P.S.)": ["Odontolog√≠a Preventiva y Social V"]
};
    if (!localStorage.getItem("aprobadas")) {
  localStorage.removeItem("aprobadas");
}
let aprobadas = {};
if (localStorage.getItem("aprobadas")) {
  try {
    aprobadas = JSON.parse(localStorage.getItem("aprobadas"));
  } catch (e) {
    aprobadas = {};
  }
} // eliminado catch redundante

    function renderMalla() {
      const total = Object.values(materias).flat().length;
      const cantidad = Object.values(aprobadas).filter(e => e === "aprobada" || e === "final").length;
      const porcentaje = Math.round((cantidad / total) * 100);
      document.getElementById("stats").textContent = `Materias completadas (aprobadas o en final): ${cantidad} / ${total} (${porcentaje}%)`;
      document.getElementById("stats").style.backgroundColor = "#ffe2ec";
      document.getElementById("stats").style.padding = "8px 12px";
      document.getElementById("stats").style.borderRadius = "8px";
      document.getElementById("stats").style.marginBottom = "10px";
      document.getElementById("progress-bar").style.width = `${porcentaje}%`;
      const cont = document.getElementById("malla");
      cont.innerHTML = "";

      for (const [cuatrimestre, materiasDelCuatri] of Object.entries(materias)) {
        const bloque = document.createElement("div");
        bloque.className = "cuatrimestre";
        const titulo = document.createElement("h3");
        titulo.textContent = cuatrimestre;
        bloque.appendChild(titulo);

        const contMaterias = document.createElement("div");
        contMaterias.className = "materias-container";

        materiasDelCuatri.forEach(nombre => {
          const div = document.createElement("div");
          div.className = "materia";
          div.textContent = nombre + (aprobadas[nombre] === "final" ? " üìù" : "");

          const correlativasTexto = (correlativas[nombre] || []).join(', ');
          if (correlativasTexto) {
            div.title = 'Correlativas: ' + correlativasTexto;
          }

          const reqs = correlativas[nombre] || [];
          if (!aprobadas[nombre] && reqs.length > 0 && reqs.some(c => !(c in aprobadas) || aprobadas[c] !== "aprobada")) {
            div.title += `
Faltan: ${reqs.filter(c => !(c in aprobadas) || (aprobadas[c] !== "aprobada" && aprobadas[c] !== "final")).join(', ')}`;
          }
          const bloqueada = reqs.some(c => aprobadas[c] !== "aprobada" && aprobadas[c] !== "final");

          if (aprobadas[nombre] === "aprobada") {
            div.classList.add("aprobada");
            div.style.backgroundColor = "#e3a8d6";
          } else if (aprobadas[nombre] === "final") {
            div.classList.add("final");
            div.style.backgroundColor = "#9f80aa";
          } else if (aprobadas[nombre] === "cursando") {
            div.classList.add("cursando");
            div.style.backgroundColor = "#fdd1e2";
          } else if (bloqueada) {
            div.classList.add("bloqueada");
          }

          div.onclick = () => toggleMateria(nombre);

          contMaterias.appendChild(div);
        });

        bloque.appendChild(contMaterias);
        cont.appendChild(bloque);
      }
    }

    function toggleMateria(nombre) {
      const estados = [null, "cursando", "aprobada", "final"];
      const actual = aprobadas[nombre] || null;
      const siguiente = estados[(estados.indexOf(actual) + 1) % estados.length];
      if (siguiente) {
        aprobadas[nombre] = siguiente;
      } else {
        delete aprobadas[nombre];
      }
      localStorage.setItem("aprobadas", JSON.stringify(aprobadas));
      renderMalla();
    }

    document.getElementById("toggle-dark").onclick = () => {
      document.body.classList.toggle("dark");
    };

    document.getElementById("reset").onclick = () => {
      if (confirm("¬øEst√°s seguro de que quer√©s reiniciar el progreso?")) {
        aprobadas = {};
        localStorage.setItem("aprobadas", JSON.stringify(aprobadas));
        renderMalla();
      }
    };
      renderMalla();
  function scrollToCuatrimestre(anio) {
  const elementos = Array.from(document.querySelectorAll('.cuatrimestre h3'));
  const destino = elementos.find(el => el.textContent.startsWith(anio));
  if (destino) {
    destino.scrollIntoView({ behavior: 'smooth', block: 'start' });
  }
}
window.addEventListener("scroll", () => {
  const nav = document.getElementById("navegacion-anios");
  const y = window.scrollY;
  const isInputActive = document.activeElement && (document.activeElement.tagName === "INPUT" || document.activeElement.tagName === "TEXTAREA");
  if (isInputActive) {
    nav.style.display = "none";
  } else {
    nav.style.display = "block";
    nav.style.opacity = y > 200 ? "0.6" : "1";
  }
});
</script>
</body>
</html>
